import{_ as T,d as z,b as j,a as K,u as N,g as U,r as u,e as a,f as i,c as _,o as w,h as o,i as g,w as n,j as r,t as k,L as W,k as F,l as $,m as H,n as I,p as O,q as D}from"./index-SiRIT6sV.js";import P from"./starBackground-pLkdtQ6i.js";const A={class:"logins"},G={style:{"font-size":"1.7rem","font-weight":"600","padding-bottom":"20px","padding-top":"20px","font-family":"'Kh Muol'"}},J={key:0},Q={key:1},X={class:"el-login-footer"},Y=["innerHTML"],Z=z({name:"login"}),ee=Object.assign(Z,{setup(oe){const M=j(),S=K(),C=N(),{proxy:t}=U(),s=u({username:"",password:"",rememberMe:!1,code:"",uuid:""}),p=window.location.host,V={username:[{required:!0,trigger:"blur",message:" Enter usernmae"}],password:[{required:!0,trigger:"blur",message:"Enter password"}],code:[{required:!0,trigger:"change",message:"Enter code"}]};u("");const d=u(!1);u(""),u(!1);const h=u(),B={"background-image":`url(${a.get("wallpaper")||"/static/images/background.jpeg"})`};h.value=C.query.redirect;function v(){t.$refs.loginRef.validate(l=>{l&&(d.value=!0,s.value.rememberMe?(a.set("username",s.value.username,{expires:30,path:p}),a.set("password",D(s.value.password),{expires:30,path:p}),a.set("rememberMe",s.value.rememberMe,{expires:30,path:p})):(a.remove("username"),a.remove("password"),a.remove("rememberMe")),M.login(s.value).then(e=>{t.$modal.msgSuccess(t.$t("login.loginSuccess")),S.push({path:h.value||"/"})}).catch(e=>{console.error(e),t.$modal.msgError(e.msg),d.value=!1}))})}function E(){t.$prompt("System Wallpaper ",t.$t("system.System Message"),{confirmButtonText:t.$t("common.ok"),cancelButtonText:t.$t("common.cancel"),closeOnClickModal:!1,inputPattern:/^.{5,100}$/,inputErrorMessage:t.$t("system. Required")}).then(({value:l})=>{a.set("wallpaper",l,{expires:30,path:p})?t.$modal.msgSuccess("Wallpaper changed successfully!"):t.$modal.msgError("Failed to change wallpaper."),window.location.reload()}).catch(()=>{})}function q(){const l=a.get("username"),e=a.get("password"),c=a.get("rememberMe");s.value={username:l===void 0?s.value.username:l,password:e===void 0?s.value.password:O(e),rememberMe:c===void 0?!1:!!c}}return q(),(l,e)=>{const c=i("el-col"),y=i("svg-icon"),b=i("el-input"),m=i("el-form-item"),x=i("el-button"),L=i("el-form"),R=i("el-row");return w(),_("div",A,[o(R,{gutter:24},{default:n(()=>[o(c,{xs:0,sm:16,md:16,lg:16,xl:16,class:"bg-login-r",style:B}),o(c,{xs:24,sm:8,md:8,lg:8,xl:8,class:"bg-login-l login",style:{"background-color":"#169af0"}},{default:n(()=>[o(P),o(L,{ref:"loginRef",model:r(s),rules:V,class:"login-form"},{default:n(()=>[g("div",G,k(r(t).$t("menu.systemTools")),1),e[3]||(e[3]=g("br",null,null,-1)),o(W,{title:"Multilingual settings",class:"langSet"}),o(m,{prop:"username"},{default:n(()=>[o(b,{modelValue:r(s).username,"onUpdate:modelValue":e[0]||(e[0]=f=>r(s).username=f),type:"text",size:"default","auto-complete":"off",placeholder:l.$t("login.account")},{prefix:n(()=>[o(y,{name:"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue","placeholder"])]),_:1}),o(m,{prop:"password"},{default:n(()=>[o(b,{modelValue:r(s).password,"onUpdate:modelValue":e[1]||(e[1]=f=>r(s).password=f),type:"password",size:"default","auto-complete":"off",placeholder:l.$t("login.password"),onKeyup:F(v,["enter"])},{prefix:n(()=>[o(y,{name:"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue","placeholder"])]),_:1}),o(m,{style:{width:"100%"}},{default:n(()=>[o(x,{loading:r(d),size:"default",type:"primary",style:{width:"100%"},onClick:$(v,["prevent"])},{default:n(()=>[r(d)?(w(),_("span",Q,"logging in...")):(w(),_("span",J,k(l.$t("login.btnLogin")),1))]),_:1},8,["loading"])]),_:1}),o(m,{style:{width:"100%","margin-top":"50px"}},{default:n(()=>[o(x,{loading:r(d),size:"default",type:"infor",style:{width:"100%"},onClick:$(E,["prevent"])},{default:n(()=>e[2]||(e[2]=[H(" Change Wallpaper ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),g("div",X,[g("div",{innerHTML:r(I).copyright},null,8,Y)])])}}}),ae=T(ee,[["__scopeId","data-v-e375041d"]]);export{ae as default};
