import{_ as Te,r as c,C as Ue,f as r,c as N,o as i,h as l,w as e,j as o,B as X,i as _,F as ue,A as de,t as d,d as Ne,g as Fe,s as Me,I as Re,a0 as le,K as Pe,M as A,x as p,m as s,a1 as se,y,O as ie,a2 as ze,a3 as Le,a4 as qe,a5 as Ae,a6 as Be,a7 as De}from"./index-SiRIT6sV.js";import{i as W}from"./requireIcons-DJlL9H-Z.js";const Ee={class:"icon-body"},Ke={class:"icon-list"},Oe=["onClick"],Qe={class:"name"},je={class:"icon-list"},Ye=["onClick"],Ze={class:"name"},Ge={__name:"index",emits:["selected"],setup(re,{expose:h,emit:E}){const $=c([]);for(const w in Ue)$.value.push(w);const C=c(""),F=c(W),z=c("1"),K=E;function O(){F.value=W,C.value&&(F.value=W.filter(w=>w.indexOf(C.value)!==-1))}function B(w,g){const L=g!=null?g+w:w;console.log(L),K("selected",L),document.body.click()}function x(){C.value="",F.value=W}return h({reset:x}),(w,g)=>{const L=r("search"),Q=r("el-icon"),ee=r("delete"),D=r("el-input"),a=r("svg-icon"),M=r("el-tab-pane"),j=r("el-tabs");return i(),N("div",Ee,[l(D,{modelValue:o(C),"onUpdate:modelValue":g[1]||(g[1]=f=>X(C)?C.value=f:null),style:{position:"relative"},clearable:"",placeholder:"请输入图标名称",onClear:O,onInput:O},{prefix:e(()=>[l(Q,{class:"el-input__icon"},{default:e(()=>[l(L)]),_:1})]),suffix:e(()=>[l(Q,{class:"el-input__icon",onClick:g[0]||(g[0]=f=>B(""))},{default:e(()=>[l(ee)]),_:1})]),_:1},8,["modelValue"]),l(j,{modelValue:o(z),"onUpdate:modelValue":g[2]||(g[2]=f=>X(z)?z.value=f:null)},{default:e(()=>[l(M,{label:"svg-icon",name:"1"},{default:e(()=>[_("div",Ke,[(i(!0),N(ue,null,de(o(F),(f,Y)=>(i(),N("div",{class:"icon-item mb10",key:Y,onClick:Z=>B(f,"")},[l(a,{name:f,style:{height:"30px",width:"16px"}},null,8,["name"]),_("div",Qe,d(f),1)],8,Oe))),128))])]),_:1}),l(M,{label:"Element-UI Icons",name:"2"},{default:e(()=>[_("div",je,[(i(!0),N(ue,null,de(o($),f=>(i(),N("div",{class:"icon-item mb10",key:f,onClick:Y=>B(f,"ele-")},[l(a,{name:"ele-"+f,style:{height:"30px",width:"16px"}},null,8,["name"]),_("div",Ze,d(f),1)],8,Ye))),128))])]),_:1})]),_:1},8,["modelValue"])])}}},He=Te(Ge,[["__scopeId","data-v-c3664b2e"]]),Je={class:"app-container"},We={key:0},Xe={key:1},xe=["onClick"],el={key:0},ll=Ne({name:"sysmenu"}),al=Object.assign(ll,{setup(re){const{proxy:h}=Fe(),E=c([]),$=c(!1),C=c(!0),F=c(!0),z=c(""),K=c([]),O=c([]),B=c([]),x=c(!1);c(!0);const w=c(!1),g=c(null),L=new Map,Q=c(null);c(null);const ee=Me({form:{},queryParams:{num_page:0,limit:10,menuName:void 0,visible:void 0,menuTypeIds:"M,C",parentId:void 0},rules:{menuName:[{required:!0,message:"required",trigger:"blur"}],menuNameKey:[{pattern:/^[A-Za-z].+$/,message:"required",trigger:"blur"}],orderNum:[{required:!0,message:"required",trigger:"blur"}],path:[{required:!0,message:"required",trigger:"blur"}],visible:[{required:!0,message:"required",trigger:"blur"}]},sys_show_hide:[],sys_normal_disable:[]}),{queryParams:D,form:a}=Re(ee);function M(){C.value=!0,D.value.subof!=null&&(D.value.menuTypeIds=""),le(D.value).then(t=>{E.value=t.data,O.value=t.data,C.value=!1})}function j(){le({num_page:0,limit:50,menuTypeIds:"M,C,F"}).then(t=>{K.value=t.data})}function f(t){C.value=!0,M()}function Y(){$.value=!1,Z()}function Z(){a.value={id:void 0,parentId:0,menuName:void 0,icon:void 0,menuType:"M",orderNum:999,isFrame:0,isCache:0,visible:0,status:0},h.resetForm("menuRef")}function me(){g.value.reset(),w.value=!0}function pe(t){a.value.icon=t,w.value=!1}function te(){M()}function ne(t){Z(),j(),console.log(t),t!=null&&t.id!=null?a.value.subof=t.id:a.value.parentId=0,$.value=!0,z.value=h.$t("btn.add"),h.$refs.menuRef.handleAdd(t)}async function ce(t){Z(),j(),Le(t.id).then(u=>{a.value=u.data,$.value=!0,z.value=h.$t("btn.edit")})}function fe(t){return t.charAt(0)!=="/"?"/"+t:t}function _e(){h.$refs.menuRef.validate(t=>{t&&(a.value.menuType=="M"&&(a.value.component="Layout",a.value.redirect="noRedirect",a.value.subof=0,a.value.isFrame=0,a.value.path=fe(a.value.path)),a.value.id!=null?Be(a.value.id,a.value).then(()=>{h.$modal.msgSuccess("Success"),$.value=!1,f(a.value.parentId)}):De(a.value).then(()=>{h.$modal.msgSuccess("Success"),$.value=!1,f(a.value.parentId)}))})}function be(t){h.$modal.confirm('是否确认删除名称为"'+t.menuName+'"的数据项?').then(function(){return qe(t.id)}).then(()=>{M(),h.$modal.msgSuccess("删除成功")}).catch(()=>{})}const ae=c([]),ye=t=>{t&&ae.value.push(t)},G=c(-1);function he(t){G.value=t,setTimeout(()=>{ae.value[t].focus()},100)}function ve(t){G.value=-1,h.$confirm("Do you want to save ?").then(function(){return ze({value:t.orderNum,id:t.id})}).then(()=>{te(),h.$modal.msgSuccess("修改成功")}).catch(()=>{te()})}const ge=(t,u,V)=>{Ae(t.id).then(m=>{var H;if(m.data[0].children==null){V(null);return}else L.set(t.id,{row:t,treeNode:u,resolve:V}),V((H=m.data[0])==null?void 0:H.children)})};return le({menuTypeIds:"M,C"}).then(t=>{B.value=t.data}),M(),(t,u)=>{const V=r("el-button"),m=r("el-col"),H=r("right-toolbar"),oe=r("el-row"),k=r("el-table-column"),R=r("el-tag"),P=r("el-input"),$e=r("el-table"),we=r("el-cascader"),b=r("el-form-item"),v=r("el-radio"),q=r("el-radio-group"),I=r("questionFilled"),S=r("el-icon"),T=r("el-tooltip"),Ve=r("el-input-number"),ke=r("search"),Ce=r("el-popover"),Se=r("el-form"),Ie=r("el-dialog"),J=Pe("hasPermi");return i(),N("div",Je,[l(oe,{gutter:10,class:"mb8"},{default:e(()=>[l(m,{span:1.5},{default:e(()=>[A((i(),p(V,{type:"primary",plain:"",icon:"Plus",onClick:ne},{default:e(()=>[s(d(t.$t("btn.add")),1)]),_:1})),[[J,["system:menu:add"]]])]),_:1}),l(m,{span:1.5},{default:e(()=>[l(V,{type:"info",plain:"",icon:"Sort",onClick:t.toggleExpandAll},{default:e(()=>[s(d(t.$t("btn.expand"))+"/"+d(t.$t("btn.collapse")),1)]),_:1},8,["onClick"])]),_:1}),l(H,{showSearch:o(F),"onUpdate:showSearch":u[0]||(u[0]=n=>X(F)?F.value=n:null),onQueryTable:M},null,8,["showSearch"])]),_:1}),l($e,{"default-expand-all":o(x),data:o(E),"node-key":"id","row-key":"id",lazy:"",load:ge,"tree-props":{children:"children",hasChildren:"alwaysShow"},"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"}},{default:e(()=>[l(k,{prop:"name",label:t.$t("m.menuName"),"show-overflow-tooltip":!0,width:"200"},{default:e(n=>[n.row.titleKey?(i(),N("span",We,d(t.$t(n.row.titleKey)),1)):(i(),N("span",Xe,d(n.row.name),1))]),_:1},8,["label"]),l(k,{prop:"icon",label:t.$t("m.icon"),align:"center",width:"60"},{default:e(n=>[l(o(se),{name:n.row.icon},null,8,["name"])]),_:1},8,["label"]),l(k,{prop:"id",label:t.$t("m.id"),"show-overflow-tooltip":!0,width:"80",align:"center"},null,8,["label"]),l(k,{prop:"menuType",label:t.$t("m.menuType"),align:"center",width:"80"},{default:e(n=>[n.row.menuType=="M"&&n.row.isFrame==1?(i(),p(R,{key:0,type:"danger"},{default:e(()=>[s(d(t.$t("m.link")),1)]),_:1})):n.row.menuType=="C"?(i(),p(R,{key:1},{default:e(()=>[s(d(t.$t("m.menu")),1)]),_:1})):n.row.menuType=="M"?(i(),p(R,{key:2,type:"success"},{default:e(()=>[s(d(t.$t("m.directory")),1)]),_:1})):n.row.menuType=="F"?(i(),p(R,{key:3,type:"warning"},{default:e(()=>[s(d(t.$t("m.button")),1)]),_:1})):y("",!0)]),_:1},8,["label"]),l(k,{prop:"orderNum",label:t.$t("m.sort"),width:"90",sortable:"",align:"center"},{default:e(n=>[A(_("span",{onClick:U=>he(n.$index)},d(n.row.orderNum),9,xe),[[ie,o(G)!=n.$index]]),A(l(P,{ref:ye,modelValue:n.row.orderNum,"onUpdate:modelValue":U=>n.row.orderNum=U,onBlur:U=>ve(n.row)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),[[ie,o(G)==n.$index]])]),_:1},8,["label"]),l(k,{prop:"perms",label:t.$t("m.authorityID"),"show-overflow-tooltip":!0},null,8,["label"]),l(k,{prop:"component",label:t.$t("m.componentPath"),"show-overflow-tooltip":!0},null,8,["label"]),l(k,{prop:"hidden",label:t.$t("m.isShow"),width:"70",align:"center"},{default:e(n=>[n.row.hidden==!1?(i(),p(R,{key:0},{default:e(()=>u[17]||(u[17]=[s("true")])),_:1})):y("",!0),n.row.hidden!==!1?(i(),p(R,{key:1,type:"danger"},{default:e(()=>u[18]||(u[18]=[s("false")])),_:1})):y("",!0)]),_:1},8,["label"]),l(k,{prop:"menuStatus",label:t.$t("m.menuState"),width:"80",align:"center"},{default:e(n=>[n.row.menuStatus==!0?(i(),p(R,{key:0},{default:e(()=>[s(d(n.row.menuStatus),1)]),_:2},1024)):y("",!0),n.row.menuStatus!==!0?(i(),p(R,{key:1,type:"danger"},{default:e(()=>u[19]||(u[19]=[s("false")])),_:1})):y("",!0)]),_:1},8,["label"]),l(k,{label:t.$t("common.API"),align:"left",prop:"apiURL","show-overflow-tooltip":!0},{default:e(n=>[_("span",null,"{ "+d(n.row.apiURL)+" }",1)]),_:1},8,["label"]),l(k,{label:t.$t("btn.operate"),align:"center",width:"170","class-name":"small-padding fixed-width"},{default:e(n=>[A(l(V,{text:"",size:"small",icon:"Edit",onClick:U=>ce(n.row)},null,8,["onClick"]),[[J,["system:menu:edit"]]]),A(l(V,{text:"",size:"small",icon:"Plus",onClick:U=>ne(n.row)},null,8,["onClick"]),[[J,["system:menu:add"]]]),A(l(V,{text:"",size:"small",icon:"Delete",onClick:U=>be(n.row)},null,8,["onClick"]),[[J,["system:menu:remove"]]])]),_:1},8,["label"])]),_:1},8,["default-expand-all","data"]),l(Ie,{title:o(z),modelValue:o($),"onUpdate:modelValue":u[16]||(u[16]=n=>X($)?$.value=n:null),width:"680px","append-to-body":""},{footer:e(()=>[l(V,{text:"",onClick:Y},{default:e(()=>[s(d(t.$t("btn.cancel")),1)]),_:1}),l(V,{type:"primary",onClick:_e},{default:e(()=>[s(d(t.$t("btn.submit")),1)]),_:1})]),default:e(()=>[l(Se,{ref_key:"menuRef",ref:Q,model:o(a),rules:t.rules,"label-width":"120px"},{default:e(()=>[l(oe,null,{default:e(()=>[l(m,{lg:12},{default:e(()=>[l(b,{label:t.$t("m.parentMenu")},{default:e(()=>[l(we,{class:"w100",options:o(K),props:{checkStrictly:!0,value:"id",label:"name",emitPath:!1},placeholder:"请选择上级菜单",clearable:"",modelValue:o(a).subof,"onUpdate:modelValue":u[1]||(u[1]=n=>o(a).subof=n)},{default:e(({node:n,data:U})=>[_("span",null,d(U.name),1),n.isLeaf?y("",!0):(i(),N("span",el," ("+d(U.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1},8,["label"])]),_:1}),l(m,{lg:12},{default:e(()=>[l(b,{label:t.$t("m.menuType"),prop:"menuType"},{default:e(()=>[l(q,{modelValue:o(a).menuType,"onUpdate:modelValue":u[2]||(u[2]=n=>o(a).menuType=n)},{default:e(()=>[l(v,{label:"M"},{default:e(()=>[s(d(t.$t("m.directory")),1)]),_:1}),l(v,{label:"C"},{default:e(()=>[s(d(t.$t("m.menu")),1)]),_:1}),l(v,{label:"F"},{default:e(()=>[s(d(t.$t("m.button")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(m,{lg:24},{default:e(()=>[l(b,{label:t.$t("m.apiURL"),prop:"apiURL"},{default:e(()=>[l(P,{modelValue:o(a).apiURL,"onUpdate:modelValue":u[3]||(u[3]=n=>o(a).apiURL=n),placeholder:"Enter apiURL"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(m,{lg:12},{default:e(()=>[l(b,{label:t.$t("m.menuName"),prop:"name"},{default:e(()=>[l(P,{modelValue:o(a).name,"onUpdate:modelValue":u[4]||(u[4]=n=>o(a).name=n),placeholder:"Enter menu name"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(m,{lg:12},{default:e(()=>[l(b,{label:"menu(key)",prop:"menuNameKey"},{label:e(()=>[_("span",null,[l(T,{content:"eg：menu.system",placement:"top"},{default:e(()=>[l(S,{size:15},{default:e(()=>[l(I)]),_:1})]),_:1}),s(" "+d(t.$t("m.menuNameKey")),1)])]),default:e(()=>[l(P,{modelValue:o(a).titleKey,"onUpdate:modelValue":u[5]||(u[5]=n=>o(a).titleKey=n),placeholder:"Enter menu key "},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{lg:12},{default:e(()=>[l(b,{label:t.$t("m.sort"),prop:"orderNum"},{default:e(()=>[l(Ve,{modelValue:o(a).orderNum,"onUpdate:modelValue":u[6]||(u[6]=n=>o(a).orderNum=n),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(a).menuType!="F"?(i(),p(m,{key:0,lg:24},{default:e(()=>[l(b,{label:t.$t("m.icon"),prop:"icon"},{default:e(()=>[l(Ce,{placement:"bottom-start",teleported:!1,width:540,visible:o(w),trigger:"click"},{reference:e(()=>[l(P,{modelValue:o(a).icon,"onUpdate:modelValue":u[7]||(u[7]=n=>o(a).icon=n),placeholder:"Icon",onClick:me,readonly:""},{prefix:e(()=>[o(a).icon?(i(),p(o(se),{key:0,name:o(a).icon},null,8,["name"])):(i(),p(S,{key:1},{default:e(()=>[l(ke)]),_:1}))]),_:1},8,["modelValue"])]),default:e(()=>[l(o(He),{ref_key:"iconSelectRef",ref:g,onSelected:pe},null,512)]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1})):y("",!0),o(a).menuType!="F"?(i(),p(m,{key:1,lg:12},{default:e(()=>[l(b,null,{label:e(()=>[_("span",null,[l(T,{content:"",placement:"top"},{default:e(()=>[l(S,{size:15},{default:e(()=>[l(I)]),_:1})]),_:1}),s(" "+d(t.$t("m.isFrame")),1)])]),default:e(()=>[l(q,{modelValue:o(a).isFrame,"onUpdate:modelValue":u[8]||(u[8]=n=>o(a).isFrame=n)},{default:e(()=>[l(v,{label:1,value:"1"},{default:e(()=>[s(d(t.$t("common.yes")),1)]),_:1}),l(v,{label:0,value:"0"},{default:e(()=>[s(d(t.$t("common.no")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):y("",!0),o(a).menuType!="F"?(i(),p(m,{key:2,lg:12},{default:e(()=>[l(b,{prop:"path"},{label:e(()=>[_("span",null,[l(T,{content:"",placement:"top"},{default:e(()=>[l(S,{size:15},{default:e(()=>[l(I)]),_:1})]),_:1}),s(" "+d(t.$t("m.routePath")),1)])]),default:e(()=>[l(P,{modelValue:o(a).path,"onUpdate:modelValue":u[9]||(u[9]=n=>o(a).path=n),placeholder:"Rote path"},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0),o(a).menuType=="C"?(i(),p(m,{key:3,lg:12},{default:e(()=>[l(b,{prop:"component"},{label:e(()=>[_("span",null,[l(T,{content:"The component path to access, such as: `system/user/index`, default in the `views` directory",placement:"top"},{default:e(()=>[l(S,{size:15},{default:e(()=>[l(I)]),_:1})]),_:1}),s(" "+d(t.$t("m.componentPath")),1)])]),default:e(()=>[l(P,{modelValue:o(a).component,"onUpdate:modelValue":u[10]||(u[10]=n=>o(a).component=n),placeholder:"Please enter component path"},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0),o(a).menuType!="M"?(i(),p(m,{key:4,lg:12},{default:e(()=>[l(b,null,{label:e(()=>[_("span",null,[l(T,{content:"Permission characters defined in the controller, such as: [ActionPermissionFilter(Permission = 'system:user:delete')])",placement:"top"},{default:e(()=>[l(S,{size:15},{default:e(()=>[l(I)]),_:1})]),_:1}),s(" "+d(t.$t("m.permissionStr")),1)])]),default:e(()=>[l(P,{modelValue:o(a).perms,"onUpdate:modelValue":u[11]||(u[11]=n=>o(a).perms=n),placeholder:"Please enter the permission ID",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0),o(a).menuType=="C"?(i(),p(m,{key:5,lg:12},{default:e(()=>[l(b,{prop:"isCache"},{label:e(()=>[_("span",null,[l(T,{content:"If you select Yes, it will be cached by `keep-alive`, and the `name` and address of the matching component need to be consistent",placement:"top"},{default:e(()=>[l(S,{size:15},{default:e(()=>[l(I)]),_:1})]),_:1}),s(" "+d(t.$t("m.isCache")),1)])]),default:e(()=>[l(q,{modelValue:o(a).noCache,"onUpdate:modelValue":u[12]||(u[12]=n=>o(a).noCache=n)},{default:e(()=>[l(v,{label:!1,value:"false"},{default:e(()=>[s(d(t.$t("common.yes")),1)]),_:1}),l(v,{label:!0,value:"true"},{default:e(()=>[s(d(t.$t("common.no")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):y("",!0),o(a).menuType!="F"?(i(),p(m,{key:6,lg:12},{default:e(()=>[l(b,{prop:"visible"},{label:e(()=>[_("span",null,[l(T,{content:"If you choose to hide, the route will not appear in the sidebar, but it can still be accessed",placement:"top"},{default:e(()=>[l(S,{size:15},{default:e(()=>[l(I)]),_:1})]),_:1}),s(" "+d(t.$t("m.isShow")),1)])]),default:e(()=>[l(q,{modelValue:o(a).hidden,"onUpdate:modelValue":u[13]||(u[13]=n=>o(a).hidden=n)},{default:e(()=>[l(v,{label:!1,value:"false"},{default:e(()=>[s(d(t.$t("common.yes")),1)]),_:1}),l(v,{label:!0,value:"true"},{default:e(()=>[s(d(t.$t("common.no")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):y("",!0),o(a).menuType!="F"?(i(),p(m,{key:7,lg:12},{default:e(()=>[l(b,null,{label:e(()=>[_("span",null,[l(T,{content:"If you choose to disable, the route will not appear in the sidebar and cannot be accessed",placement:"top"},{default:e(()=>[l(S,{size:15},{default:e(()=>[l(I)]),_:1})]),_:1}),s(" "+d(t.$t("m.menuState")),1)])]),default:e(()=>[l(q,{modelValue:o(a).menuStatus,"onUpdate:modelValue":u[14]||(u[14]=n=>o(a).menuStatus=n)},{default:e(()=>[l(v,{label:!0,value:"true"},{default:e(()=>[s(d(t.$t("common.yes")),1)]),_:1}),l(v,{label:!1,value:"false"},{default:e(()=>[s(d(t.$t("common.no")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):y("",!0),o(a).menuType!="F"?(i(),p(m,{key:8,lg:12},{default:e(()=>[l(b,null,{label:e(()=>[_("span",null,[l(T,{content:"If you choose to disable, the route will not appear in the sidebar and cannot be accessed",placement:"top"},{default:e(()=>[l(S,{size:15},{default:e(()=>[l(I)]),_:1})]),_:1}),s(" "+d(t.$t("m.hasSub")),1)])]),default:e(()=>[l(q,{modelValue:o(a).alwaysShow,"onUpdate:modelValue":u[15]||(u[15]=n=>o(a).alwaysShow=n)},{default:e(()=>[l(v,{label:!0,value:"true"},{default:e(()=>[s(d(t.$t("common.yes")),1)]),_:1}),l(v,{label:!1,value:"false"},{default:e(()=>[s(d(t.$t("common.no")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{al as default};
