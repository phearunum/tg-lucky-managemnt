import{G as h,r as s,s as P,I as R,U as $,f as u,c as V,o as m,h as t,i as L,w as o,j as T,F as A,A as E,x as F,m as p,t as G,al as H}from"./index-SiRIT6sV.js";function I(){return h({url:"/tables/select",method:"get"})}const K={class:"app-container"},j={__name:"video",setup(M){const _=s(null),y=s([]),k=P({form:{tableNo:"",signKey:"GsRi8CMEYQeyBQNf",streamKey:""}}),{form:g}=R(k),n=s(""),b=s(""),w=s(""),a=s(null);async function C(){try{const e=(await I()).data.filter(r=>r.videoURL!==null&&r.videoURL!=="");console.log(e),y.value=e}catch(l){console.error("Error fetching video list:",l)}}function x(){const l=new Date,e=new Date(l.toLocaleString("en-US",{timeZone:"America/Bogota"})),r=e.toLocaleDateString("en-GB"),d=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});_.value=`${r} ${d}`}function S(){c(),n.value=w.value,a.value&&n.value&&a.value.play()}function B(){c(),n.value=b.value,a.value&&n.value&&a.value.play(),console.log(n.value)}function c(){a.value&&a.value.pause()}function D(l){w.value=`wss://nms.devops.wine/live/${l}.flv`,b.value=`wss://nms.devops.wine/live/${l}-m.flv`,S()}return $(()=>{x(),setInterval(x,1e3),C()}),(l,e)=>{const r=u("el-option"),d=u("el-select"),f=u("el-form-item"),v=u("el-button"),N=u("el-form"),U=u("el-row");return m(),V("div",K,[t(U,{gutter:24},{default:o(()=>[t(N,{inline:!0,class:"demo-form-inline"},{default:o(()=>[t(f,{label:"Table No:"},{default:o(()=>[t(d,{modelValue:T(g).tableNo,"onUpdate:modelValue":e[0]||(e[0]=i=>T(g).tableNo=i),placeholder:"table",onChange:D,style:{width:"200px"},filterable:""},{default:o(()=>[(m(!0),V(A,null,E(y.value,i=>(m(),F(r,{key:i.videoURL,label:i.name,value:i.videoURL},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,null,{default:o(()=>[t(v,{type:"primary",onClick:S},{default:o(()=>e[1]||(e[1]=[p("Play PC")])),_:1}),t(v,{type:"primary",onClick:B},{default:o(()=>e[2]||(e[2]=[p("Play H5")])),_:1}),t(v,{type:"danger",onClick:c},{default:o(()=>e[3]||(e[3]=[p("Stop Video")])),_:1})]),_:1}),t(f,null,{default:o(()=>[L("div",null,"Bogota(UTC-5) : "+G(_.value),1)]),_:1})]),_:1})]),_:1}),L("div",null,[t(H,{ref_key:"flvPlayer",ref:a,hasAudio:!0,controls:"",muted:!1,source:n.value,isLive:!0,type:"flv",style:{"margin-top":"0px","border-radius":"10px","background-color":"white","box-shadow":"0 2px 3px 0 rgba(0, 0, 0, 0.1)",transition:"0.3s"}},null,8,["source"])])])}}};export{j as default};
