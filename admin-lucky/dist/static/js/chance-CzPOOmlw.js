import{G as q,_ as pe,d as ce,g as _e,r as b,s as fe,I as ge,U as be,f as r,K as ye,c as P,o as f,h as t,w as l,i as C,m as g,t as m,j as a,M as he,x as v,Y as ve,l as L,B as $e,F as R,A as j,Z as we}from"./index-SiRIT6sV.js";import{g as ke}from"./lucky.service-Co8g9gZC.js";function Ce($){return q({url:"/account/chance-points/list",method:"get",params:$})}function xe($){return q({url:"/account/chance-points/",method:"post",data:$})}function Ve($){return q({url:"/account/chance-points/update",method:"put",data:$})}const De={class:"app-container"},Ye={type:"border-card",class:"demo-tabs",style:{"min-height":"70vh","margin-top":"-10px"}},Me={style:{"font-size":"10px","line-height":"20px"}},Se=ce({name:"user"}),Ue=Object.assign(Se,{setup($){const{proxy:o}=_e(),F=b([]),H=b([]),x=b(!0),y=b(!1),I=b(0),U=b(""),G=b(1),J=b(15),V=fe({queryParams:{page:0,limit:15,start_date:"",end_date:"",query:""},form:{}}),E=b();E.value=[{status_value:"expired",status_name:"expired"},{status_value:"available",status_name:"available"},{status_value:"collected",status_name:"collected"}];const{queryParams:p,form:u}=ge(V),T=s=>{const n=new Date(s),i=n.toLocaleDateString("en-CA"),c=n.toLocaleTimeString("en-CA",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return`${i}, ${c}`},w=(s=1)=>{x.value=!0,Ce(V.queryParams).then(n=>{x.value=!1,F.value=n.data,I.value=n.meta.total})},K=s=>{G.value=s,o.$nextTick(()=>{w(s)})},Z=s=>{J.value=s,o.$nextTick(()=>{w()})},Q=()=>{u.value={catName:void 0,catCode:void 0}},W=()=>{Q(),y.value=!0,U.value=o.$t("system.Add New")};function A(s){console.log(s),u.value=s,y.value=!0,U.value="Update Record"}const N=s=>{V.queryParams.query=s,ke(V.queryParams).then(n=>{x.value=!1,H.value=n.data})},X=()=>{const{userId:s,roleId:n,companyId:i,username:c}=JSON.parse(we());o.$refs.formRef.validate(D=>{D&&(u.value.create_by=c,u.value.id!==void 0&&u.value.id>0?Ve(u.value).then(k=>{y.value=!1,k.statusCode==200?(o.$modal.msgSuccess(o.$t("system.Success")),w()):o.$modal.msgError(o.$t("system.Failed"))}):xe(u.value).then(k=>{y.value=!1,k.statusCode==200?(o.$modal.msgSuccess(o.$t("system.Success")),w()):o.$modal.msgError(o.$t("system.Failed"))}))})};return be(()=>{w()}),(s,n)=>{const i=r("el-col"),c=r("el-button"),D=r("el-date-picker"),k=r("el-input"),Y=r("el-row"),M=r("el-icon"),ee=r("center"),te=r("el-image"),h=r("el-table-column"),le=r("Orange"),z=r("el-tag"),ae=r("CircleCheck"),ne=r("CircleClose"),oe=r("el-table"),se=r("el-pagination"),O=r("el-option"),B=r("el-select"),S=r("el-form-item"),re=r("el-input-number"),de=r("el-form"),ue=r("el-dialog"),ie=r("el-card"),me=ye("loading");return f(),P("div",De,[t(ie,{shadow:"never"},{default:l(()=>[t(Y,{gutter:24},{default:l(()=>[t(i,{span:4,xs:24},{default:l(()=>n[12]||(n[12]=[C("div",{class:"head-container"},null,-1)])),_:1}),t(i,{lg:24,xm:24},{default:l(()=>[t(Y,{gutter:10,class:"mb8"},{default:l(()=>[t(i,{span:1.5},{default:l(()=>[t(c,{type:"primary",plain:"",icon:"plus",onClick:W},{default:l(()=>[g(m(s.$t("btn.add")),1)]),_:1})]),_:1}),t(i,{span:1.5},{default:l(()=>[t(D,{modelValue:a(p).start_date,"onUpdate:modelValue":n[0]||(n[0]=e=>a(p).start_date=e),type:"datetime",placeholder:"From Date",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(i,{span:1.5},{default:l(()=>[t(D,{modelValue:a(p).end_date,"onUpdate:modelValue":n[1]||(n[1]=e=>a(p).end_date=e),type:"datetime",placeholder:"To Date",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(i,{span:1.5},{default:l(()=>[t(k,{modelValue:a(p).query,"onUpdate:modelValue":n[2]||(n[2]=e=>a(p).query=e),placeholder:"filter by account , chatid ..",clearable:"",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),_:1}),t(i,{span:1.5},{default:l(()=>[t(c,{type:"primary",icon:"search",onClick:n[3]||(n[3]=e=>w(1))},{default:l(()=>[g(m(s.$t("btn.search")),1)]),_:1})]),_:1})]),_:1}),C("div",Ye,[he((f(),v(oe,{data:a(F)},{default:l(()=>[t(h,{prop:"profile",label:"Account",align:"left",width:"180",style:{"text-align":"left"}},{default:l(e=>[t(Y,null,{default:l(()=>[t(i,{span:8},{default:l(()=>{var d;return[t(te,{src:(d=e==null?void 0:e.row)==null?void 0:d.profile,style:{"border-radius":"30%",width:"35px",height:"35px","margin-top":"5px","background-color":"#f2f2f2","margin-left":"-20px"}},{error:l(()=>[t(ee,null,{default:l(()=>[t(M,null,{default:l(()=>[t(a(ve))]),_:1})]),_:1})]),_:2},1032,["src"])]}),_:2},1024),t(i,{span:16,style:{"line-height":"10px","text-align":"left","align-items":"center","padding-top":"8px"}},{default:l(()=>{var d,_;return[C("span",null,[g(m((d=e==null?void 0:e.row)==null?void 0:d.account_name),1),n[13]||(n[13]=C("br",null,null,-1)),C("span",Me,m((_=e==null?void 0:e.row)==null?void 0:_.employee_id),1)])]}),_:2},1024)]),_:2},1024)]),_:1}),t(h,{label:a(o).$t("Chat ID"),align:"left",sortable:"",key:"chat_id",width:"250",prop:"chat_id"},null,8,["label"]),t(h,{label:a(o).$t("lables.total_chance"),align:"left",key:"total_chance",prop:"total_chance"},{default:l(e=>[t(z,{type:"primary",style:{"min-width":"60px"}},{default:l(()=>{var d;return[g(m((d=e.row)==null?void 0:d.total_chance)+" ",1),t(M,{style:{color:"orangered"}},{default:l(()=>[t(le)]),_:1})]}),_:2},1024)]),_:1},8,["label"]),t(h,{label:a(o).$t("lables.status"),align:"left",key:"status",prop:"status"},{default:l(e=>{var d;return[((d=e.row)==null?void 0:d.status)=="available"?(f(),v(z,{key:0,type:"primary",style:{"min-width":"75px"}},{default:l(()=>{var _;return[g(m((_=e.row)==null?void 0:_.status)+" ",1),t(M,null,{default:l(()=>[t(ae)]),_:1})]}),_:2},1024)):(f(),v(z,{key:1,type:"danger",style:{"min-width":"75px"}},{default:l(()=>{var _;return[g(m((_=e.row)==null?void 0:_.status)+" ",1),t(M,null,{default:l(()=>[t(ne)]),_:1})]}),_:2},1024))]}),_:1},8,["label"]),t(h,{label:a(o).$t("Expired"),align:"left",sortable:"",key:"expired",width:"100",prop:"expired"},null,8,["label"]),t(h,{label:a(o).$t("created_at"),align:"right",key:"created_at",prop:"created_at",width:"170"},{default:l(e=>{var d;return[g(m(T((d=e==null?void 0:e.row)==null?void 0:d.created_at)),1)]}),_:1},8,["label"]),t(h,{label:a(o).$t("updated_at"),align:"right",key:"updated_at",prop:"updated_at",width:"170"},{default:l(e=>{var d;return[g(m(T((d=e==null?void 0:e.row)==null?void 0:d.updated_at)),1)]}),_:1},8,["label"]),t(h,{label:a(o).$t("action"),align:"right",width:"100"},{default:l(e=>{var d;return[((d=e.row)==null?void 0:d.expired)=="no"?(f(),v(c,{key:0,type:"primary",size:"small",icon:"edit",title:s.$t("btn.edit"),onClick:L(_=>A(e.row),["stop"])},null,8,["title","onClick"])):(f(),v(c,{key:1,type:"primary",size:"small",disabled:"",icon:"edit",title:s.$t("btn.edit"),onClick:L(_=>A(e.row),["stop"])},null,8,["title","onClick"]))]}),_:1},8,["label"])]),_:1},8,["data"])),[[me,a(x)]])]),n[14]||(n[14]=C("br",null,null,-1)),t(se,{"current-page":a(p).page,"onUpdate:currentPage":n[4]||(n[4]=e=>a(p).page=e),"page-size":a(p).limit,"onUpdate:pageSize":n[5]||(n[5]=e=>a(p).limit=e),"page-sizes":[15,20,30,40,50,60,70,80,90,100,120],small:!0,disabled:s.disabled,background:s.background,layout:"total, sizes, prev, pager, next, jumper",total:a(I),onSizeChange:K,onCurrentChange:Z},null,8,["current-page","page-size","disabled","background","total"])]),_:1})]),_:1}),t(ue,{title:a(U),modelValue:a(y),"onUpdate:modelValue":n[11]||(n[11]=e=>$e(y)?y.value=e:null),width:"600px","append-to-body":"","close-on-click-modal":!1,draggable:""},{footer:l(()=>[t(c,{text:"",onClick:n[10]||(n[10]=e=>y.value=!1)},{default:l(()=>[g(m(s.$t("btn.cancel")),1)]),_:1}),t(c,{type:"primary",onClick:X},{default:l(()=>[g(m(s.$t("btn.submit")),1)]),_:1})]),default:l(()=>[t(de,{ref:"formRef",model:a(u),rules:s.rules,"label-width":"150px"},{default:l(()=>[t(Y,null,{default:l(()=>[t(i,{lg:24},{default:l(()=>[t(S,{label:a(o).$t("Member"),prop:"chat_id"},{default:l(()=>[t(B,{modelValue:a(u).chat_id,"onUpdate:modelValue":n[6]||(n[6]=e=>a(u).chat_id=e),filterable:"",remote:"","reserve-keyword":"",placeholder:a(o).$t("system.Enter"),"remote-show-suffix":"","remote-method":N,onChange:N,loading:a(x),style:{width:"240px"}},{default:l(()=>[(f(!0),P(R,null,j(a(H),e=>(f(),v(O,{key:e.account_name,label:e.account_name,value:e.chat_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"])]),_:1},8,["label"]),t(S,{label:a(o).$t("server.stream.name"),prop:"note"},{default:l(()=>[t(k,{modelValue:a(u).note,"onUpdate:modelValue":n[7]||(n[7]=e=>a(u).note=e),type:"textarea",rows:2,placeholder:a(o).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(S,{label:a(o).$t("lables.total_chance"),prop:"total_chance"},{default:l(()=>[t(re,{modelValue:a(u).total_chance,"onUpdate:modelValue":n[8]||(n[8]=e=>a(u).total_chance=e),placeholder:a(o).$t("system.Enter"),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(S,{label:a(o).$t("lables.status"),prop:"status"},{default:l(()=>[t(B,{modelValue:a(u).status,"onUpdate:modelValue":n[9]||(n[9]=e=>a(u).status=e),placeholder:"Select",style:{width:"150px"}},{default:l(()=>[(f(!0),P(R,null,j(a(E),e=>(f(),v(O,{key:e.status_value,label:e.status_name,value:e.status_value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])]),_:1})])}}}),qe=pe(Ue,[["__scopeId","data-v-a51fa01b"]]);export{qe as default};
