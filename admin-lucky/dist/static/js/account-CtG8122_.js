import{g as P}from"./telegram-COMxY2di.js";import{u as k,w as j}from"./xlsx-5rFX-EW9.js";import{d as I,g as L,r as p,s as E,I as R,U as A,f as d,K,c as O,o as M,h as e,w as o,i as v,m as _,t as c,j as l,M as G,x as J}from"./index-SiRIT6sV.js";const Q={class:"app-container"},W={type:"border-card",class:"demo-tabs",style:{"min-height":"70vh","margin-top":"10px"}},X=I({name:"user"}),ne=Object.assign(X,{setup(Z){const{proxy:s}=L(),f=p([]),y=p(!0),h=p(0),V=p(1),q=p(15),w=E({queryParams:{page:0,limit:15,start_date:"",end_date:"",query:""},form:{}}),{queryParams:i,form:ee}=R(w),z=()=>{const n=k.book_new(),t=new Date,r=k.json_to_sheet(f.value);k.book_append_sheet(n,r,"User Data");const b=`break_time-${t}.xlsx`;j(n,b)},x=n=>{if(n<60)return`${n}min`;{const t=Math.floor(n/60),r=n%60;return`${t}h ${r} min`}},g=(n=1)=>{y.value=!0,P(w.queryParams).then(t=>{y.value=!1,f.value=t.data,h.value=t.meta.total})},H=n=>{V.value=n,s.$nextTick(()=>{g(n)})},T=n=>{q.value=n,s.$nextTick(()=>{g()})};return A(()=>{g()}),(n,t)=>{const r=d("el-col"),b=d("el-button"),$=d("el-date-picker"),U=d("el-input"),D=d("el-row"),u=d("el-table-column"),Y=d("el-tag"),S=d("el-table"),B=d("el-pagination"),F=d("el-card"),N=K("loading");return M(),O("div",Q,[e(F,{shadow:"never"},{default:o(()=>[e(D,{gutter:24},{default:o(()=>[e(r,{span:4,xs:24},{default:o(()=>t[6]||(t[6]=[v("div",{class:"head-container"},null,-1)])),_:1}),e(r,{lg:24,xm:24},{default:o(()=>[e(D,{gutter:10,class:"mb8"},{default:o(()=>[e(r,{span:1.5},{default:o(()=>[e(b,{type:"primary",plain:"",icon:"UploadFilled",onClick:z},{default:o(()=>[_(c(n.$t("btn.export")),1)]),_:1})]),_:1}),e(r,{span:1.5},{default:o(()=>[e($,{modelValue:l(i).start_date,"onUpdate:modelValue":t[0]||(t[0]=a=>l(i).start_date=a),type:"datetime",placeholder:"From Date",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(r,{span:1.5},{default:o(()=>[e($,{modelValue:l(i).end_date,"onUpdate:modelValue":t[1]||(t[1]=a=>l(i).end_date=a),type:"datetime",placeholder:"To Date",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(r,{span:1.5},{default:o(()=>[e(U,{modelValue:l(i).query,"onUpdate:modelValue":t[2]||(t[2]=a=>l(i).query=a),placeholder:"filter by account , chatid ..",clearable:"",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),_:1}),e(r,{span:1.5},{default:o(()=>[e(b,{type:"primary",icon:"search",onClick:t[3]||(t[3]=a=>g(1))},{default:o(()=>[_(c(n.$t("btn.search")),1)]),_:1})]),_:1})]),_:1}),v("div",W,[G((M(),J(S,{data:l(f)},{default:o(()=>[e(u,{label:l(s).$t("Account Name"),align:"left",sortable:"",key:"account_name",prop:"account_name"},null,8,["label"]),e(u,{label:l(s).$t("Chat ID"),align:"center",sortable:"",key:"chat_id",width:"180",prop:"chat_id"},null,8,["label"]),e(u,{label:l(s).$t("Leave"),align:"center",sortable:"",key:"start_time",prop:"start_time"},null,8,["label"]),e(u,{label:l(s).$t("Back"),align:"center",sortable:"",key:"end_time",prop:"end_time"},null,8,["label"]),e(u,{label:l(s).$t("Total"),align:"left",sortable:"",key:"total_time",prop:"total_time"},{default:o(a=>[e(Y,{type:"primary",style:{"min-width":"60px"}},{default:o(()=>{var m;return[_(c(x(parseFloat((m=a==null?void 0:a.row)==null?void 0:m.total_time).toFixed(0))),1)]}),_:2},1024)]),_:1},8,["label"]),e(u,{label:l(s).$t("Request"),align:"left",sortable:"",key:"request_type",prop:"request_type"},{default:o(a=>{var m;return[e(Y,{type:"primary",style:{width:"60px"}},{default:o(()=>{var C;return[_(c(x((C=a==null?void 0:a.row)==null?void 0:C.allow_time)),1)]}),_:2},1024),_(" = "+c((m=a==null?void 0:a.row)==null?void 0:m.request_type),1)]}),_:1},8,["label"]),e(u,{label:l(s).$t("message"),align:"right",sortable:"",key:"message",prop:"message"},null,8,["label"]),e(u,{label:l(s).$t("bot_name"),align:"right",sortable:"",key:"bot_name",prop:"bot_name"},null,8,["label"])]),_:1},8,["data"])),[[N,l(y)]])]),t[7]||(t[7]=v("br",null,null,-1)),e(B,{"current-page":l(i).page,"onUpdate:currentPage":t[4]||(t[4]=a=>l(i).page=a),"page-size":l(i).limit,"onUpdate:pageSize":t[5]||(t[5]=a=>l(i).limit=a),"page-sizes":[15,20,30,40,50,60,70,80,90,100,120,200,300,500,1e3],small:!0,disabled:n.disabled,background:n.background,layout:"total, sizes, prev, pager, next, jumper",total:l(h),onSizeChange:H,onCurrentChange:T},null,8,["current-page","page-size","disabled","background","total"])]),_:1})]),_:1})]),_:1})])}}});export{ne as default};
