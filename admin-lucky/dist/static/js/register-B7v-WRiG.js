import{d as R,g as T,a as M,r as c,s as v,v as V,n as _,f as l,c as w,o as f,h as e,i as d,w as s,x as U,y as E,t as K,j as t,k as y,l as N,m as H,F as L,E as O}from"./index-SiRIT6sV.js";import S from"./starBackground-pLkdtQ6i.js";const j={class:"register"},z={class:"title"},D={key:0},I={key:1},$={style:{float:"right"}},A={class:"el-register-footer"},G=["innerHTML"],J=R({name:"register"}),Z=Object.assign(J,{setup(Q){const{proxy:x}=T(),k=M();c("");const r=v({username:"",password:"",confirmPassword:"",code:"",uuid:""}),C=c(null),u=c(!1),h=c(!0),b=v({username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:5,max:20,message:"用户密码长度必须介于 6 和 20 之间",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(g,o,a)=>{r.password!==o?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]});V(()=>_.copyright);const q=V(()=>_.title);function m(){x.$refs.registerFormRef.validate(g=>{g&&(u.value=!0,register(r).then(o=>{if(o.code==200){const a=r.username;O.alert("<font color='red'>恭喜你，您的账号 "+a+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{k.push("/login")}).catch(()=>{})}}).catch(()=>{u.value=!1,h.value&&getCode()}))})}return getCode(),(g,o)=>{const a=l("svg-icon"),p=l("el-input"),i=l("el-form-item"),P=l("el-button"),B=l("router-link"),F=l("el-form");return f(),w(L,null,[e(S),d("div",j,[e(F,{ref_key:"registerFormRef",ref:C,model:t(r),rules:t(b),class:"register-form"},{default:s(()=>[d("h3",z,K(t(q)),1),e(i,{prop:"username"},{default:s(()=>[e(p,{modelValue:t(r).username,"onUpdate:modelValue":o[0]||(o[0]=n=>t(r).username=n),type:"text","auto-complete":"off",placeholder:"账号"},{prefix:s(()=>[e(a,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),e(i,{prop:"password"},{default:s(()=>[e(p,{modelValue:t(r).password,"onUpdate:modelValue":o[1]||(o[1]=n=>t(r).password=n),type:"password","auto-complete":"off",placeholder:"密码",onKeyup:y(m,["enter","native"])},{prefix:s(()=>[e(a,{name:"password"})]),_:1},8,["modelValue"])]),_:1}),e(i,{prop:"confirmPassword"},{default:s(()=>[e(p,{modelValue:t(r).confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=n=>t(r).confirmPassword=n),type:"password","auto-complete":"off",placeholder:"确认密码",onKeyup:y(m,["enter","native"])},{prefix:s(()=>[e(a,{name:"password"})]),_:1},8,["modelValue"])]),_:1}),t(h)?(f(),U(i,{key:0,prop:"code"},{default:s(()=>[e(p,{modelValue:t(r).code,"onUpdate:modelValue":o[3]||(o[3]=n=>t(r).code=n),"auto-complete":"off",placeholder:"验证码",style:{width:"63%"},onKeyup:y(m,["enter","native"])},{prefix:s(()=>[e(a,{name:"validCode"})]),_:1},8,["modelValue"])]),_:1})):E("",!0),e(i,{style:{width:"100%"}},{default:s(()=>[e(P,{loading:t(u),type:"primary",size:"large",style:{width:"100%"},onClick:N(m,["prevent"])},{default:s(()=>[t(u)?(f(),w("span",I,"注 册 中...")):(f(),w("span",D,"注 册"))]),_:1},8,["loading"]),d("div",$,[e(B,{class:"link-type",to:"/login"},{default:s(()=>o[4]||(o[4]=[H("使用已有账户登录")])),_:1})])]),_:1})]),_:1},8,["model","rules"]),d("div",A,[d("div",{innerHTML:t(_).copyright},null,8,G)])])],64)}}});export{Z as default};
