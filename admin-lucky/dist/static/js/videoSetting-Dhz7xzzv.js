import{d as ae,g as oe,r as m,s as re,I as se,U as ne,f as i,K as F,c as q,o as v,h as a,w as s,i as U,M as V,x as y,m as h,t as k,j as e,y as D,l as N,B as de,F as ue,A as ie}from"./index-SiRIT6sV.js";import{v as me,a as pe,d as ce,u as _e,b as be}from"./videosnap-CuoVhljV.js";const ve={class:"app-container"},fe={type:"border-card",class:"demo-tabs",style:{"min-height":"70vh","margin-top":"10px"}},ge=ae({name:"user"}),he=Object.assign(ge,{setup(ye){const{proxy:l}=oe(),z=m([]),R=m([]),w=m(!0),E=m(0),C=m(""),_=m(!1),T=m(1),L=m(10),M=m([]),P=m();P.value=[{status_value:!1,status_name:l.$t("common.no")},{status_value:!0,status_name:l.$t("common.yes")}];const j=m();j.value=[{status_value:!1,status_name:l.$t("common.no")},{status_value:!0,status_name:l.$t("common.yes")}];const B=re({queryParams:{page:0,limit:10,q:""},form:{}}),{queryParams:f,form:r}=se(B),b=(n=1)=>{w.value=!0,me(B.queryParams).then(t=>{w.value=!1,z.value=t.data,E.value=t.meta.total})},A=n=>{T.value=n,l.$nextTick(()=>{b(n)})},I=n=>{L.value=n,l.$nextTick(()=>{b()})},O=()=>{r.value={catName:void 0,catCode:void 0}},K=()=>{O(),_.value=!0,C.value=l.$t("system.Add New")};function G(n){const t=n.id||R.value;pe(t).then(p=>{r.value=p.data,_.value=!0,C.value="Update Record"})}const H=()=>{l.$refs.formRef.validate(n=>{n&&(r.value.id!==void 0&&r.value.id>0?_e(r.value).then(t=>{_.value=!1,t.statusCode==200?(l.$modal.msgSuccess(l.$t("system.Success")),b()):l.$modal.msgError(l.$t("system.Failed"))}):be(r.value).then(t=>{_.value=!1,t.statusCode==200?(l.$modal.msgSuccess(l.$t("system.Success")),b()):l.$modal.msgError(l.$t("system.Failed"))}))})},J=n=>{const t=n.id||t.value;l.$confirm(l.$t("system.Do you want to delete")+` = ${t} ?`,l.$t("system.System Message"),{confirmButtonText:l.$t("yes"),cancelButtonText:l.$t("no"),type:"warning"}).then(()=>ce(t)).then(p=>{p.statusCode==200?(l.$modal.msgSuccess(l.$t("system.Success")),b()):l.$modal.msgError(l.$t("system.Failed"))})};return ne(()=>{b()}),(n,t)=>{const p=i("el-col"),g=i("el-button"),c=i("el-input"),x=i("el-row"),d=i("el-table-column"),Q=i("el-table"),W=i("el-pagination"),u=i("el-form-item"),S=i("el-input-number"),X=i("el-option"),Y=i("el-select"),Z=i("el-form"),ee=i("el-dialog"),$=F("hasPermi"),le=F("loading");return v(),q("div",ve,[a(x,{gutter:24},{default:s(()=>[a(p,{span:4,xs:24},{default:s(()=>t[19]||(t[19]=[U("div",{class:"head-container"},null,-1)])),_:1}),a(p,{lg:24,xm:24},{default:s(()=>[a(x,{gutter:10,class:"mb8"},{default:s(()=>[a(p,{span:1.5},{default:s(()=>[V((v(),y(g,{type:"primary",plain:"",icon:"plus",onClick:K},{default:s(()=>[h(k(n.$t("btn.add")),1)]),_:1})),[[$,["system:server:add"]]])]),_:1}),a(p,{span:1.5},{default:s(()=>[a(c,{modelValue:e(f).q,"onUpdate:modelValue":t[0]||(t[0]=o=>e(f).q=o),placeholder:"Search",clearable:"","prefix-icon":"el-icon-search",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),_:1}),a(p,{span:1.5},{default:s(()=>[a(g,{type:"primary",icon:"search",onClick:t[1]||(t[1]=o=>b(1))},{default:s(()=>[h(k(n.$t("btn.search")),1)]),_:1})]),_:1})]),_:1}),U("div",fe,[V((v(),y(Q,{data:e(z),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"}},{default:s(()=>[a(d,{label:e(l).$t("server.stream.id"),align:"center",sortable:"",key:"id",width:"100",prop:"id"},null,8,["label"]),a(d,{label:e(l).$t("server.stream.name"),align:"center",sortable:"",key:"server_name",prop:"server_name"},null,8,["label"]),a(d,{label:e(l).$t("server.stream.rtmp"),align:"center",sortable:"",key:"rtmp",width:"180",prop:"rtmp"},null,8,["label"]),a(d,{label:e(l).$t("server.stream.size"),align:"center",sortable:"",key:"video_size",prop:"video_size"},null,8,["label"]),a(d,{label:e(l).$t("server.stream.type"),align:"center",sortable:"",key:"video_type",prop:"video_type"},null,8,["label"]),a(d,{label:e(l).$t("server.stream.duration"),align:"center",sortable:"",key:"duration",prop:"duration"},null,8,["label"]),a(d,{label:e(l).$t("server.stream.before_start"),align:"center",sortable:"",key:"before_start",prop:"before_start"},null,8,["label"]),a(d,{label:e(l).$t("server.stream.after_end"),align:"center",sortable:"",key:"after_end",prop:"after_end"},null,8,["label"]),a(d,{label:e(l).$t("server.stream.bucket_name"),align:"center",sortable:"",key:"bucket_name",prop:"bucket_name"},null,8,["label"]),a(d,{label:e(l).$t("server.stream.output_path"),align:"center",sortable:"",key:"output_path",prop:"output_path"},null,8,["label"]),a(d,{label:e(l).$t("server.stream.delete_local_store"),align:"center",sortable:"",key:"delete_local_store",prop:"delete_local_store"},null,8,["label"]),e(M).showColumn("create_at")?(v(),y(d,{key:0,label:e(l).$t("create on"),align:"center",sortable:"",prop:"create_at",width:"200"},null,8,["label"])):D("",!0),a(d,{fixed:"right",label:e(l).$t("action"),align:"center",width:"150","class-name":"small-padding fixed-width"},{default:s(o=>[V(a(g,{size:"small",text:"",icon:"edit",title:n.$t("btn.edit"),onClick:N(te=>G(o.row),["stop"])},null,8,["title","onClick"]),[[$,["system:server:update"]]]),o.row.id>1?V((v(),y(g,{key:0,size:"small",text:"",icon:"delete",title:n.$t("btn.delete"),onClick:N(te=>J(o.row),["stop"])},null,8,["title","onClick"])),[[$,["system:server:delete"]]]):D("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[le,e(w)],[$,["setting:video:view"]]])]),t[20]||(t[20]=U("br",null,null,-1)),a(W,{"current-page":e(f).num_page,"onUpdate:currentPage":t[2]||(t[2]=o=>e(f).num_page=o),"page-size":e(f).limit,"onUpdate:pageSize":t[3]||(t[3]=o=>e(f).limit=o),"page-sizes":[100,200,300,400],small:!0,disabled:n.disabled,background:n.background,layout:"total, sizes, prev, pager, next, jumper",total:e(E),onSizeChange:A,onCurrentChange:I},null,8,["current-page","page-size","disabled","background","total"])]),_:1}),a(ee,{title:e(C),modelValue:e(_),"onUpdate:modelValue":t[18]||(t[18]=o=>de(_)?_.value=o:null),width:"600px","append-to-body":"","close-on-click-modal":!1},{footer:s(()=>[a(g,{text:"",onClick:t[17]||(t[17]=o=>_.value=!1)},{default:s(()=>[h(k(n.$t("btn.cancel")),1)]),_:1}),a(g,{type:"primary",onClick:H},{default:s(()=>[h(k(n.$t("btn.submit")),1)]),_:1})]),default:s(()=>[a(Z,{ref:"formRef",model:e(r),rules:n.rules,"label-width":"100px"},{default:s(()=>[a(x,null,{default:s(()=>[a(p,{lg:24},{default:s(()=>[a(u,{label:e(l).$t("server.stream.name"),prop:"server_name"},{default:s(()=>[a(c,{modelValue:e(r).server_name,"onUpdate:modelValue":t[4]||(t[4]=o=>e(r).server_name=o),placeholder:e(l).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:e(l).$t("server.stream.rtmp"),prop:"rtmp"},{default:s(()=>[a(c,{modelValue:e(r).rtmp,"onUpdate:modelValue":t[5]||(t[5]=o=>e(r).rtmp=o),placeholder:e(l).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:e(l).$t("server.stream.duration"),prop:"duration"},{default:s(()=>[a(S,{modelValue:e(r).duration,"onUpdate:modelValue":t[6]||(t[6]=o=>e(r).duration=o),placeholder:e(l).$t("system.Enter"),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:e(l).$t("server.stream.size"),prop:"video_size"},{default:s(()=>[a(c,{modelValue:e(r).video_size,"onUpdate:modelValue":t[7]||(t[7]=o=>e(r).video_size=o),placeholder:e(l).$t("system.Enter"),style:{width:"120px"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:e(l).$t("server.stream.type"),prop:"video_type"},{default:s(()=>[a(c,{modelValue:e(r).video_type,"onUpdate:modelValue":t[8]||(t[8]=o=>e(r).video_type=o),placeholder:e(l).$t("system.Enter"),style:{width:"120px"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:e(l).$t("server.stream.before_start"),prop:"before_start"},{default:s(()=>[a(S,{modelValue:e(r).before_start,"onUpdate:modelValue":t[9]||(t[9]=o=>e(r).before_start=o),placeholder:e(l).$t("system.Enter"),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:e(l).$t("server.stream.after_end"),prop:"after_end"},{default:s(()=>[a(S,{modelValue:e(r).after_end,"onUpdate:modelValue":t[10]||(t[10]=o=>e(r).after_end=o),placeholder:e(l).$t("system.Enter"),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:e(l).$t("server.stream.access_domain"),prop:"access_domain"},{default:s(()=>[a(c,{modelValue:e(r).access_domain,"onUpdate:modelValue":t[11]||(t[11]=o=>e(r).access_domain=o),placeholder:e(l).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:e(l).$t("server.stream.bucket_name"),prop:"bucket_name"},{default:s(()=>[a(c,{modelValue:e(r).bucket_name,"onUpdate:modelValue":t[12]||(t[12]=o=>e(r).bucket_name=o),placeholder:e(l).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:e(l).$t("server.stream.service_account"),prop:"service_account"},{default:s(()=>[a(c,{modelValue:e(r).service_account,"onUpdate:modelValue":t[13]||(t[13]=o=>e(r).service_account=o),placeholder:e(l).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:e(l).$t("server.stream.output_path"),prop:"output_path"},{default:s(()=>[a(c,{modelValue:e(r).output_path,"onUpdate:modelValue":t[14]||(t[14]=o=>e(r).output_path=o),placeholder:e(l).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:"Prefix",prop:"prefix"},{default:s(()=>[a(c,{modelValue:e(r).prefix,"onUpdate:modelValue":t[15]||(t[15]=o=>e(r).prefix=o),placeholder:e(l).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1}),a(u,{label:e(l).$t("server.stream.delete_local_store"),prop:"delete_local_store"},{default:s(()=>[a(Y,{modelValue:e(r).delete_local_store,"onUpdate:modelValue":t[16]||(t[16]=o=>e(r).delete_local_store=o),placeholder:"Select",style:{width:"130px"}},{default:s(()=>[(v(!0),q(ue,null,ie(e(P),o=>(v(),y(X,{key:o.status_value,label:o.status_name,value:o.status_value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])]),_:1})])}}});export{he as default};
