import{G as te,d as le,g as ae,r as d,s as oe,I as re,U as se,f as u,K as T,c as ne,o as v,h as t,w as r,i as _,j as e,m as U,t as V,M as ue,x as h,y as w,B as de}from"./index-SiRIT6sV.js";function ie(x){return te({url:"/account/video/list",method:"get",params:x})}const me={class:"app-container"},pe={type:"border-card",class:"demo-tabs",style:{"min-height":"70vh","margin-top":"10px"}},ce=["href"],_e=["href"],fe=le({name:"user"}),ge=Object.assign(fe,{setup(x){const{proxy:a}=ae(),E=d([]);d([]);const C=d(!0),D=d(0),A=d(""),f=d(!1),B=d(1),L=d(10),P=d([]),R=d();R.value=[{status_value:!1,status_name:a.$t("system.Disable")},{status_value:!0,status_name:a.$t("system.Active")}];const I=d();I.value=[{status_value:!1,status_name:a.$t("common.no")},{status_value:!0,status_name:a.$t("common.yes")}];const N=oe({queryParams:{page:0,limit:20,query:""},form:{}}),{queryParams:b,form:s}=re(N),F=n=>{if(!n)return"N/A";const l=n.trim();console.log("Parsing:",JSON.stringify(l));const c=new Date(l);if(isNaN(c.getTime()))return console.error("Invalid Date Detected:",l),"Invalid Date";const i=c.toLocaleDateString("en-CA"),y=c.toLocaleTimeString("en-CA",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\s/g,"");return`${i}, ${y}`},g=(n=1)=>{C.value=!0,ie(N.queryParams).then(l=>{C.value=!1,E.value=l.data,D.value=l.meta.total})},O=n=>{B.value=n,a.$nextTick(()=>{g(n)})},j=n=>{L.value=n,a.$nextTick(()=>{g()})},G=()=>{a.$refs.formRef.validate(n=>{n&&(s.value.id!==void 0&&s.value.id>0?updateVideoSetting(s.value).then(l=>{f.value=!1,l.statusCode==200?(a.$modal.msgSuccess(a.$t("system.Success")),g()):a.$modal.msgError(a.$t("system.Failed"))}):addVideoSetting(s.value).then(l=>{f.value=!1,l.statusCode==200?(a.$modal.msgSuccess(a.$t("system.Success")),g()):a.$modal.msgError(a.$t("system.Failed"))}))})};return se(()=>{g()}),(n,l)=>{const c=u("el-col"),i=u("el-input"),y=u("el-button"),S=u("el-row"),m=u("el-table-column"),M=u("Picture"),k=u("el-icon"),J=u("VideoPlay"),K=u("SuccessFilled"),q=u("el-tag"),H=u("CircleCloseFilled"),Q=u("el-table"),W=u("el-pagination"),p=u("el-form-item"),z=u("el-input-number"),X=u("el-form"),Y=u("el-dialog"),Z=T("loading"),ee=T("hasPermi");return v(),ne("div",me,[t(S,{gutter:24},{default:r(()=>[t(c,{span:4,xs:24},{default:r(()=>l[16]||(l[16]=[_("div",{class:"head-container"},null,-1)])),_:1}),t(c,{lg:24,xm:24},{default:r(()=>[t(S,{gutter:10,class:"mb8"},{default:r(()=>[t(c,{span:1.5},{default:r(()=>[t(i,{modelValue:e(b).query,"onUpdate:modelValue":l[0]||(l[0]=o=>e(b).query=o),placeholder:"Enter GameNo ..",clearable:"","prefix-icon":"el-icon-search",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),_:1}),t(c,{span:1.5},{default:r(()=>[t(y,{type:"primary",icon:"search",onClick:l[1]||(l[1]=o=>g(1))},{default:r(()=>[U(V(n.$t("btn.search")),1)]),_:1})]),_:1})]),_:1}),_("div",pe,[ue((v(),h(Q,{data:e(E),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"}},{default:r(()=>[t(m,{label:e(a).$t("server.stream.id"),align:"center",sortable:"",key:"id",width:"100",prop:"id"},null,8,["label"]),t(m,{label:e(a).$t("server.stream.game_no"),align:"center",sortable:"",key:"period",prop:"period","min-width":"200"},null,8,["label"]),t(m,{label:e(a).$t("server.stream.process_id"),align:"center",sortable:"",key:"process_id",prop:"process_id",width:"120"},null,8,["label"]),t(m,{label:e(a).$t("server.stream.rtmp"),align:"center",sortable:"",key:"rtmp",prop:"rtmp"},null,8,["label"]),t(m,{label:e(a).$t("server.stream.stream_key"),align:"center",sortable:"",key:"rtmpurl",prop:"rtmpurl",width:"250"},null,8,["label"]),t(m,{label:e(a).$t("server.stream.image_url"),align:"center",sortable:"",key:"image_url",prop:"image_url",width:"120"},{default:r(o=>[_("a",{href:o.row.image_url,target:"_blank"},[t(k,{style:{"font-size":"1.5rem"}},{default:r(()=>[t(M)]),_:1})],8,ce)]),_:1},8,["label"]),t(m,{label:e(a).$t("server.stream.video_url"),align:"center",sortable:"",key:"video_url",prop:"video_url",width:"100"},{default:r(o=>[_("a",{href:o.row.video_url,target:"_blank"},[t(k,{style:{"font-size":"1.5rem"}},{default:r(()=>[t(J)]),_:1})],8,_e)]),_:1},8,["label"]),t(m,{label:e(a).$t("common.status"),align:"center",sortable:"",key:"status",prop:"status",width:"80"},{default:r(o=>[o.row.status==!0?(v(),h(q,{key:0,class:"ml-2",type:"success",title:"Active"},{default:r(()=>[t(k,null,{default:r(()=>[t(K)]),_:1})]),_:1})):w("",!0),o.row.status==!1?(v(),h(q,{key:1,class:"ml-2",type:"danger",title:"Disabled"},{default:r(()=>[t(k,null,{default:r(()=>[t(H)]),_:1})]),_:1})):w("",!0)]),_:1},8,["label"]),e(P).showColumn("create_at")?(v(),h(m,{key:0,label:e(a).$t("create on"),align:"center",sortable:"",prop:"created_at",width:"150"},{default:r(o=>{var $;return[_("span",null,V(F(($=o==null?void 0:o.row)==null?void 0:$.created_at)),1)]}),_:1},8,["label"])):w("",!0),e(P).showColumn("create_at")?(v(),h(m,{key:1,label:e(a).$t("create on"),align:"center",sortable:"",prop:"updated_at",width:"150"},{default:r(o=>{var $;return[_("span",null,V(F(($=o==null?void 0:o.row)==null?void 0:$.updated_at)),1)]}),_:1},8,["label"])):w("",!0)]),_:1},8,["data"])),[[Z,e(C)],[ee,["setting:video:view"]]])]),l[17]||(l[17]=_("br",null,null,-1)),t(W,{"current-page":e(b).page,"onUpdate:currentPage":l[2]||(l[2]=o=>e(b).page=o),"page-size":e(b).limit,"onUpdate:pageSize":l[3]||(l[3]=o=>e(b).limit=o),"page-sizes":[40,50,60,80,90,100,150,200,250],small:!0,disabled:n.disabled,background:n.background,layout:"total, sizes, prev, pager, next, jumper",total:e(D),onSizeChange:O,onCurrentChange:j},null,8,["current-page","page-size","disabled","background","total"])]),_:1}),t(Y,{title:e(A),modelValue:e(f),"onUpdate:modelValue":l[15]||(l[15]=o=>de(f)?f.value=o:null),width:"600px","append-to-body":"","close-on-click-modal":!1},{footer:r(()=>[t(y,{text:"",onClick:l[14]||(l[14]=o=>f.value=!1)},{default:r(()=>[U(V(n.$t("btn.cancel")),1)]),_:1}),t(y,{type:"primary",onClick:G},{default:r(()=>[U(V(n.$t("btn.submit")),1)]),_:1})]),default:r(()=>[t(X,{ref:"formRef",model:e(s),rules:n.rules,"label-width":"100px"},{default:r(()=>[t(S,null,{default:r(()=>[t(c,{lg:24},{default:r(()=>[t(p,{label:e(a).$t("server.stream.name"),prop:"server_name"},{default:r(()=>[t(i,{modelValue:e(s).server_name,"onUpdate:modelValue":l[4]||(l[4]=o=>e(s).server_name=o),placeholder:e(a).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,{label:e(a).$t("server.stream.rtmp"),prop:"rtmp"},{default:r(()=>[t(i,{modelValue:e(s).rtmp,"onUpdate:modelValue":l[5]||(l[5]=o=>e(s).rtmp=o),placeholder:e(a).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,{label:e(a).$t("server.stream.duration"),prop:"duration"},{default:r(()=>[t(z,{modelValue:e(s).duration,"onUpdate:modelValue":l[6]||(l[6]=o=>e(s).duration=o),placeholder:e(a).$t("system.Enter"),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,{label:e(a).$t("server.stream.size"),prop:"video_size"},{default:r(()=>[t(i,{modelValue:e(s).video_size,"onUpdate:modelValue":l[7]||(l[7]=o=>e(s).video_size=o),placeholder:e(a).$t("system.Enter"),style:{width:"120px"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,{label:e(a).$t("server.stream.type"),prop:"video_type"},{default:r(()=>[t(i,{modelValue:e(s).video_type,"onUpdate:modelValue":l[8]||(l[8]=o=>e(s).video_type=o),placeholder:e(a).$t("system.Enter"),style:{width:"120px"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,{label:e(a).$t("server.stream.before_start"),prop:"before_start"},{default:r(()=>[t(z,{modelValue:e(s).before_start,"onUpdate:modelValue":l[9]||(l[9]=o=>e(s).before_start=o),placeholder:e(a).$t("system.Enter"),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,{label:e(a).$t("server.stream.after_end"),prop:"after_end"},{default:r(()=>[t(z,{modelValue:e(s).after_end,"onUpdate:modelValue":l[10]||(l[10]=o=>e(s).after_end=o),placeholder:e(a).$t("system.Enter"),"controls-position":"right"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,{label:e(a).$t("server.stream.bucket_name"),prop:"bucket_name"},{default:r(()=>[t(i,{modelValue:e(s).bucket_name,"onUpdate:modelValue":l[11]||(l[11]=o=>e(s).bucket_name=o),placeholder:e(a).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,{label:e(a).$t("server.stream.service_account"),prop:"service_account"},{default:r(()=>[t(i,{modelValue:e(s).service_account,"onUpdate:modelValue":l[12]||(l[12]=o=>e(s).service_account=o),placeholder:e(a).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,{label:e(a).$t("server.stream.output_path"),prop:"output_path"},{default:r(()=>[t(i,{modelValue:e(s).output_path,"onUpdate:modelValue":l[13]||(l[13]=o=>e(s).output_path=o),placeholder:e(a).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])]),_:1})])}}});export{ge as default};
