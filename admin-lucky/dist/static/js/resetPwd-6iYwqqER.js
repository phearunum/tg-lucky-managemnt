import{h as b}from"./user-CiOjqHtE.js";import{g as _,s as V,r as y,f as u,x as $,o as h,w as a,h as s,j as l,m as i,t as m}from"./index-SiRIT6sV.js";const U={__name:"resetPwd",setup(C){const{proxy:w}=_(),e=V({oldPassword:void 0,newPassword:void 0,confirmPassword:void 0}),f=y({oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:(r,o,d)=>{e.newPassword!==o?d(new Error("两次输入的密码不一致")):d()},trigger:"blur"}]});function c(){w.$refs.pwdRef.validate(r=>{r&&b(e.oldPassword,e.newPassword).then(o=>{w.$modal.msgSuccess("修改成功")})})}function P(){w.$tab.closePage()}return(r,o)=>{const d=u("el-input"),n=u("el-form-item"),p=u("el-button"),g=u("el-form");return h(),$(g,{ref:"pwdRef",model:l(e),rules:l(f),"label-width":"130px","label-position":"left"},{default:a(()=>[s(n,{label:r.$t("user.oldPwd"),prop:"oldPassword"},{default:a(()=>[s(d,{modelValue:l(e).oldPassword,"onUpdate:modelValue":o[0]||(o[0]=t=>l(e).oldPassword=t),placeholder:"请输入旧密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1},8,["label"]),s(n,{label:r.$t("user.newPwd"),prop:"newPassword"},{default:a(()=>[s(d,{modelValue:l(e).newPassword,"onUpdate:modelValue":o[1]||(o[1]=t=>l(e).newPassword=t),placeholder:"请输入新密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1},8,["label"]),s(n,{label:r.$t("user.confirmPwd"),prop:"confirmPassword"},{default:a(()=>[s(d,{modelValue:l(e).confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=t=>l(e).confirmPassword=t),placeholder:"请确认密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1},8,["label"]),s(n,null,{default:a(()=>[s(p,{type:"primary",icon:"Check",onClick:c},{default:a(()=>[i(m(r.$t("btn.save")),1)]),_:1}),s(p,{type:"danger",icon:"Close",onClick:P},{default:a(()=>[i(m(r.$t("btn.close")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}};export{U as default};
