import{G as $,d as ce,g as pe,r as u,s as _e,I as ve,U as fe,f as d,K as L,c as M,o as f,h as s,w as o,i as w,M as S,x as y,m as b,t as k,j as l,y as O,l as T,B as ge,F as ke,A as ye}from"./index-SiRIT6sV.js";import{v as be}from"./videosnap-CuoVhljV.js";function $e(i){return $({url:"/account/desk-settings/list",method:"get",params:i})}function he(i){return $({url:`/account/desk-settings/${i}`,method:"get"})}function Ce(i){return $({url:"/account/desk-settings/",method:"post",data:i})}function we(i){return $({url:"/account/desk-settings/update",method:"put",data:i})}function Se(i){return $({url:`/account/desk-settings/delete/${i}`,method:"delete"})}const Ve={class:"app-container"},xe={type:"border-card",class:"demo-tabs",style:{"min-height":"70vh","margin-top":"10px"}},ze=ce({name:"user"}),Ee=Object.assign(ze,{setup(i){const{proxy:t}=pe(),E=u([]),A=u([]),V=u(!0),N=u(0),x=u(""),c=u(!1),j=u(1),I=u(10),P=u([]),D=u([]),K=u();K.value=[{status_value:!1,status_name:t.$t("system.Disable")},{status_value:!0,status_name:t.$t("system.Active")}];const Q=u();Q.value=[{status_value:!1,status_name:t.$t("common.no")},{status_value:!0,status_name:t.$t("common.yes")}];const F=_e({queryParams:{page:0,limit:20,query:""},form:{}}),{queryParams:g,form:r}=ve(F),Y=()=>{be().then(n=>{D.value=n.data})};function H(){var n="GsRi8CMEYQeyBQNf";const e=t.$md5(`${n+r.value.desk_no}`);r.value.desk_streamkey=e}const p=(n=1)=>{V.value=!0,$e(F.queryParams).then(e=>{V.value=!1,E.value=e.data,N.value=e.meta.total})},J=n=>{j.value=n,t.$nextTick(()=>{p(n)})},W=n=>{I.value=n,t.$nextTick(()=>{p()})},X=()=>{r.value={catName:void 0,catCode:void 0}},Z=()=>{X(),c.value=!0,x.value=t.$t("system.Add New")};function ee(n){const e=n.id||A.value;he(e).then(m=>{r.value=m.data,c.value=!0,x.value="Update Record"})}const te=()=>{t.$refs.formRef.validate(n=>{n&&(r.value.id!==void 0&&r.value.id>0?we(r.value).then(e=>{c.value=!1,e.statusCode==200?(t.$modal.msgSuccess(t.$t("system.Success")),p()):t.$modal.msgError(t.$t("system.Failed"))}):Ce(r.value).then(e=>{c.value=!1,e.statusCode==200?(t.$modal.msgSuccess(t.$t("system.Success")),p()):t.$modal.msgError(t.$t("system.Failed"))}))})},le=n=>{const e=n.id||e.value;t.$confirm(t.$t("system.Do you want to delete")+` = ${e} ?`,t.$t("system.System Message"),{confirmButtonText:t.$t("yes"),cancelButtonText:t.$t("no"),type:"warning"}).then(()=>Se(e)).then(m=>{m.statusCode=="200"?(t.$modal.msgSuccess(t.$t("system.Success")),p()):t.$modal.msgError(t.$t("system.Failed"))})};return fe(()=>{p(),Y()}),(n,e)=>{const m=d("el-col"),_=d("el-button"),z=d("el-input"),U=d("el-row"),v=d("el-table-column"),se=d("el-table"),ae=d("el-pagination"),B=d("el-form-item"),ne=d("Connection"),oe=d("el-icon"),re=d("el-option"),de=d("el-select"),ue=d("el-form"),ie=d("el-dialog"),h=L("hasPermi"),me=L("loading");return f(),M("div",Ve,[s(U,{gutter:24},{default:o(()=>[s(m,{span:4,xs:24},{default:o(()=>e[10]||(e[10]=[w("div",{class:"head-container"},null,-1)])),_:1}),s(m,{lg:24,xm:24},{default:o(()=>[s(U,{gutter:10,class:"mb8"},{default:o(()=>[s(m,{span:1.5},{default:o(()=>[S((f(),y(_,{type:"primary",plain:"",icon:"plus",onClick:Z},{default:o(()=>[b(k(n.$t("btn.add")),1)]),_:1})),[[h,["system:server:add"]]])]),_:1}),s(m,{span:1.5},{default:o(()=>[s(z,{modelValue:l(g).query,"onUpdate:modelValue":e[0]||(e[0]=a=>l(g).query=a),placeholder:"Enter GameNo ..",clearable:"","prefix-icon":"el-icon-search",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),_:1}),s(m,{span:1.5},{default:o(()=>[s(_,{type:"primary",icon:"search",onClick:e[1]||(e[1]=a=>p(1))},{default:o(()=>[b(k(n.$t("btn.search")),1)]),_:1})]),_:1})]),_:1}),w("div",xe,[S((f(),y(se,{data:l(E),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"}},{default:o(()=>[s(v,{label:l(t).$t("server.desk.id"),align:"center",sortable:"",key:"id",width:"100",prop:"id"},null,8,["label"]),s(v,{label:l(t).$t("server.desk.desk_no"),align:"center",sortable:"",key:"desk_no",prop:"desk_no"},null,8,["label"]),s(v,{label:l(t).$t("server.desk.desk_streamkey"),align:"center",sortable:"",key:"desk_streamkey",prop:"desk_streamkey"},null,8,["label"]),s(v,{label:l(t).$t("server.desk.desk_stream_server"),align:"center",sortable:"",key:"desk_stream_server",prop:"desk_stream_server",width:"250"},{default:o(a=>{var C,R,q,G;return[w("span",null,k((R=(C=a.row)==null?void 0:C.stream_server)==null?void 0:R.server_name)+" : "+k((G=(q=a.row)==null?void 0:q.stream_server)==null?void 0:G.rtmp),1)]}),_:1},8,["label"]),l(P).showColumn("create_at")?(f(),y(v,{key:0,label:l(t).$t("create on"),align:"center",sortable:"",prop:"created_at",width:"200"},null,8,["label"])):O("",!0),l(P).showColumn("updated_at")?(f(),y(v,{key:1,label:l(t).$t("update on"),align:"center",sortable:"",prop:"updated_at",width:"200"},null,8,["label"])):O("",!0),s(v,{fixed:"right",label:l(t).$t("action"),align:"center",width:"150","class-name":"small-padding fixed-width"},{default:o(a=>[S(s(_,{size:"small",text:"",icon:"edit",title:n.$t("btn.edit"),onClick:T(C=>ee(a.row),["stop"])},null,8,["title","onClick"]),[[h,["system:server:update"]]]),S(s(_,{size:"small",text:"",icon:"delete",title:n.$t("btn.delete"),onClick:T(C=>le(a.row),["stop"])},null,8,["title","onClick"]),[[h,["system:server:delete"]]])]),_:1},8,["label"])]),_:1},8,["data"])),[[me,l(V)],[h,["setting:video:view"]]])]),e[11]||(e[11]=w("br",null,null,-1)),s(ae,{"current-page":l(g).page,"onUpdate:currentPage":e[2]||(e[2]=a=>l(g).page=a),"page-size":l(g).limit,"onUpdate:pageSize":e[3]||(e[3]=a=>l(g).limit=a),"page-sizes":[40,50,60,80,90,100,150,200,250],small:!0,disabled:n.disabled,background:n.background,layout:"total, sizes, prev, pager, next, jumper",total:l(N),onSizeChange:J,onCurrentChange:W},null,8,["current-page","page-size","disabled","background","total"])]),_:1}),s(ie,{title:l(x),modelValue:l(c),"onUpdate:modelValue":e[9]||(e[9]=a=>ge(c)?c.value=a:null),width:"600px","append-to-body":"","close-on-click-modal":!1},{footer:o(()=>[s(_,{text:"",onClick:e[8]||(e[8]=a=>c.value=!1)},{default:o(()=>[b(k(n.$t("btn.cancel")),1)]),_:1}),s(_,{type:"primary",onClick:te},{default:o(()=>[b(k(n.$t("btn.submit")),1)]),_:1})]),default:o(()=>[s(ue,{ref:"formRef",model:l(r),rules:n.rules,"label-width":"100px"},{default:o(()=>[s(U,null,{default:o(()=>[s(m,{lg:24},{default:o(()=>[s(B,{label:l(t).$t("server.desk.desk_no"),prop:"desk_no"},{default:o(()=>[s(z,{modelValue:l(r).desk_no,"onUpdate:modelValue":e[4]||(e[4]=a=>l(r).desk_no=a),placeholder:l(t).$t("system.Enter")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(B,{label:l(t).$t("server.desk.desk_streamkey"),prop:"desk_streamkey"},{default:o(()=>[s(z,{modelValue:l(r).desk_streamkey,"onUpdate:modelValue":e[5]||(e[5]=a=>l(r).desk_streamkey=a),placeholder:l(t).$t("system.Enter"),style:{width:"250px"}},null,8,["modelValue","placeholder"]),s(_,{type:"warning",onClick:H},{default:o(()=>[e[12]||(e[12]=b("Genertae")),s(oe,null,{default:o(()=>[s(ne)]),_:1})]),_:1})]),_:1},8,["label"]),s(B,{label:l(t).$t("server.desk.desk_stream_server"),prop:"desk_stream_server"},{default:o(()=>[s(de,{modelValue:l(r).desk_stream_server,"onUpdate:modelValue":e[6]||(e[6]=a=>l(r).desk_stream_server=a),placeholder:"Select Server",style:{width:"100%"},onChange:e[7]||(e[7]=a=>n.selectRole(a))},{default:o(()=>[(f(!0),M(ke,null,ye(l(D),a=>(f(),y(re,{key:a.id,label:a.server_name+" : "+a.rtmp,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])]),_:1})])}}});export{Ee as default};
